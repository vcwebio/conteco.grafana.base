#!/usr/bin/env bash

# START CONFIGURATION
DOLLAR='$'
export CONTECO_DC_GLOBAL_STACKS="grafana.base"
export CONTECO_DC_GLOBAL_STACKNAMES="conteco_dc_grafana"
export CONTECO_DC_GLOBAL_BOOTSTACKS=""
export CONTECO_DC_GLOBAL_RUNSTACKS="conteco_dc_grafana"
export CONTECO_DC_GLOBAL_VOLUME_LIST="${DOLLAR}{CONTECO_STACKPREFIX}_grafana_volume"
export CONTECO_DC_GLOBAL='$CONTECO_DC_GLOBAL_SERVICE_NAME,$CONTECO_DC_GLOBAL_IMAGE_NAME,$CONTECO_DC_GRAFANA_ENVIRONMENT,$CONTECO_DC_GRAFANA_COMMAND,$CONTECO_DC_GRAFANA_PORTS,$CONTECO_DC_GRAFANA_VOLUMES,$CONTECO_DC_GRAFANA_NETWORKS,$CONTECO_DC_GRAFANA_DEPLOY_MODE,$CONTECO_DC_GLOBAL_VOLUMES,$CONTECO_DC_GLOBAL_NETWORKS'
# END CONFIGURATION

# START GLOBAL SETTINGS
export CONTECO_DC_GLOBAL_SERVICE_NAME="${CONTECO_TYPE}"
export CONTECO_DC_GLOBAL_IMAGE_NAME="${CONTECO_EXTERNAL_IMAGE_NAME}"
export CONTECO_DC_GRAFANA_ENVIRONMENT="\
'GF_SERVER_SERVE_FROM_SUB_PATH=true', \
'GF_SECURITY_ALLOW_EMBEDDING=true', \
'GF_AUTH_ANONYMOUS_ENABLED=true', \
'GF_AUTH_ANONYMOUS_ORG_NAME=Main Org.', \
'GF_AUTH_ANONYMOUS_ORG_ROLE=Viewer', \
'GF_LOG_MODE=console', \
'GF_LOG_CONSOLE_FORMAT=text', \
'GF_LOG_LEVEL=warn', \
'GF_SERVER_ROOT_URL=/${DOLLAR}{CONTECO_URLPREFIX}/grafana'"
export CONTECO_DC_GRAFANA_COMMAND=
export CONTECO_DC_GRAFANA_PORTS=
export CONTECO_DC_GRAFANA_VOLUMES="'${DOLLAR}{CONTECO_STACKPREFIX}_grafana_volume:/var/lib/grafana'"
export CONTECO_DC_GRAFANA_NETWORKS="${DOLLAR}{CONTECO_NETWORKLOCAL}_overlay"
export CONTECO_DC_GRAFANA_DEPLOY_MODE="replicated"
export CONTECO_DC_GLOBAL_VOLUMES="${DOLLAR}{CONTECO_STACKPREFIX}_grafana_volume: { external: true }"
export CONTECO_DC_GLOBAL_NETWORKS="${DOLLAR}{CONTECO_NETWORKLOCAL}_overlay: { external: true }"
# END GLOBAL SETTINGS

# START SETTINGS grafana.base
export CONTECO_DC_GRAFANA_DEPLOY_RESOURCES_LIMITS_MEMORY="128m"
export CONTECO_DC_GRAFANA_DEPLOY_RESOURCES_RESERVATIONS_MEMORY="64m"
# END SETTINGS grafana.base

# START TOPLEVEL SETTINGS
# END TOPLEVEL SETTINGS
